# 项目介绍

本项目基于 vue3.x + Abp.vNext 开发，命名为 WCS-Vnext 意指为下一代 WCS。希望降低开发门槛，提高开发效率及系统可靠性、易用性，集成仿真测试降低实施成本。

## 技术选择

##### 后端

1. 基础架构 Abp.vNext
2. 鉴权:Jwt
3. 日志: Serilog + Seq
4. 对象映射 : Mapster
5. ORM: SqlsugarCore
6. 后台任务 : Quartz.Net
7. 实时通信 : SignalR
8. OpenApi
9. 响应式编程
10. 规则引擎
11. 工作流
    ...

##### 前端

1. Vue3
2. ui：element-plus
   ...

## 产品功能介绍

理念：尽量在一个界面完成项目搭建、在监控界面配置引导完成项目配置开发工作

##### 界面配置

- 监控配置
  1. 拖拉拽完成监控界面配置
  2. 支持场景拖拽缩放
  3. 通过设备复制快速搭建场景
  4. 场景搭建过程 引导通信、业务等配置
- 设备监控
  1. 设备监控：设备数据变化推送
  2. 场景：支持场景拖拽缩放
  3. 场景搭建：通过设备复制快速搭建场景
  4. 配置引导: 场景搭建过程 引导通信、业务等配置
  5. 设备日志: 设备报警时点击设备图标可快速查询设备近期日志
- 通信配置
  1. s7 通信配置: 设备协议分组扫描，设备协议快速生成，协议自动解析
  2. socket: 分包配置，底层分包
- 规则引擎

  1. 规则配置: 配置设备状态变化触发业务规则配置
     支持 c#语法表达式 `TaskNo>10000&&ToNode!=1004`
  1. 业务配置: 业务流程配置支持 重复执行、分支等

- 任务管理
  1. 定时任务: 定时任务管理、问题排查、日志查询
  2. WCS 任务: WCS 任务查询及操作更新任务状态
  3. WMS 任务: WMS 任务查询及任务回收等操作
- 权限控制
  1. 用户: 用户创建等
  2. 角色: 角色创建授权
  3. 权限: 菜单权限、按钮权限
  4. 菜单: 动态菜单配置
- 日志管理
  1. 业务日志：集成 Seq 结构化应用程序日志和跟踪的实时搜索和分析服务器，可以进行日志快速索引追踪
  2. 操作日志：记录界面操作日志
- OpenApi
  使用 swagger 接口文档，可以很好进行 api 测试、在线的接口文档参考、自动生成接口文档。

##### 功能开发

###### 业务开发

###### 界面开发

## 路线图

基本规划 每个大版本都是可用的、完整的，每个大版本，前一个版本完善及重大功能更新

##### v0.9 预览版(已完成)

###### 基本功能

- 监控配置：完成输送线、堆垛机、电控柜、矩形、文本封装，设备生成
- 监控界面：数据推送 设备状态改变、输送线设备信息查询修改、日志推送、设备日志查询
- 权限控制：动态菜单、用户、角色、菜单权限、按钮权限
- 通信配置: 完成 s7 通信配置功能
- 规则引擎：完成 基本界面及功能搭建
- 日志管理：完成业务日志 前后端

##### v1.0 正式版

###### 基本功能

- 具备预览版功能且完成架构整理、代码优化、测试
- 监控配置：完成引导配置(驱动配置、流程配置、设备模型映射配置、设备异常映射配置)
- 监控界面：根据设备模型动态生成设备表单
- 权限控制：按钮权限完成配置
- 通信配置: socket 通信配置及验证
- 规则引擎：前端 UI 配置优化、前端代码优化
- 日志管理：完善审计日志、操作日志功能
- 后端代码优化: 设备模型与协议映射配置

###### 新增功能

- 任务模块: 任务创建更新、wms 任务分解、任务状态反馈
- 路径配置: 前端拉线配置路径、配置站台缓存、站台关联
- 基础业务: 异常回退、异常排出、wcs 任务创建、缓存位出库申请、站台到位等

##### v2.0 集成测试版

- 具备正式版全部功能

###### 新增功能

- 仿真测试: 增加测试模块 利用已有场景，完成仿真搭建、仿真效果演示，比如增加发生器、吸收器 等配置
- 仿真模拟器: s7 协议仿真服务、socket 服务等，设备运行逻辑仿真。集成代码编辑器，进行自定义设备运行逻辑编辑。
